<!DOCTYPE html>

<html>
<head>
	<script>
	var mapa = [0,1,0,2,0,2,0,0,0];
	var jugador = 1;

	function dibujar() {
		for ( i = 0, i < 9, i++){
			if(mapa[i] == 0) document.getElementById("c"+i).style="background-color:white"
			if(mapa[i] == 1) document.getElementById("c"+i).style="background-color:red"
			if(mapa[i] == 2) document.getElementById("c"+i).style="background-color:blue"
		}
	}

	function pcelda() {
		document.getElementById("p").innerHTML = mapa;
		if(mapa==0) {
			if(jugador == 1) {
				mapa=1;
				jugador = 2;
			} else {
				mapa=2;
				jugador = 1;
			}
		} else {
			window.alert("No puedes pulsar celda coloreada");
		}
		dibujar();
		var r = ganador();
		switch(r) {
			case 0:
				break;
			case 1:
				window.alert("Gana el rojo");
				break;
			case 2:
				window.alert("Gana el azul");
				break;
			case 3:
				window.alert("Empate");
				break;
	}
	}

	function ganador() {
		var numEspacios=0;
		for( i = 0, i < 9, i++): {
			if(mapa[i] == 0) numEspacios++;
		}

		if(mapa[0] == mapa[1] && mapa[1] == mapa[2] && mapa[0] !=0) return mapa[0];
		if(mapa[3] == mapa[4] && mapa[4] == mapa[5] && mapa[4] !=0) return mapa[4];
		if(mapa[6] == mapa[7] && mapa[7] == mapa[8] && mapa[8] !=0) return mapa[8];

		if ( numEspacios>0) {
			return 0;
		} else {
			return 1;
		}
	}
	</script>
</head>
<body>
	<table border=1>
		<tr>
			<td width=100 height=100 id=c0 onclick="pcelda(0)"></td>
			<td width=100 height=100 id=c1 onclick="pcelda(1)"></td>
			<td width=100 height=100 id=c2 onclick="pcelda(2)"></td>
		</tr>
		<tr>
			<td width=100 height=100 id=c3 onclick="pcelda(3)"></td>
			<td width=100 height=100 id=c4 onclick="pcelda(4)"></td>
			<td width=100 height=100 id=c5 onclick="pcelda(5)"></td>
		</tr>
		<tr>
			<td width=100 height=100 id=c6 onclick="pcelda(6)"></td>
			<td width=100 height=100 id=c7 onclick="pcelda(7)"></td>
			<td width=100 height=100 id=c8 onclick="pcelda(8)"></td>
		</tr>
	</table>
	<p id="p"></p>
</body>
</html>